/*! PixiAnimate 0.3.3 */
!function(){"use strict";!function(a){var b=function(a,b,c){this.dom=b,this.symbols=[],this.libName=c||"lib",this.id=a,this.parseSymbols(b.text)},c=b.prototype;b.globalSymbols={},c.parseSymbols=function(a){for(var c=a.split(/[\(!]function\s*\(/),d=b.globalSymbols,e=0;e<c.length;++e)if(a=c[e]){var f=a.substring(0,a.indexOf(","));if(f)for(var g,h=new RegExp("\\("+f+".(\\w+)\\s*=","g"),i=h.exec(a);i;)g=i[1],this.symbols.push(g),d[g]=this.id,i=h.exec(a)}},c.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var a=b.globalSymbols,c=window[this.libName];this.symbols.forEach(function(b){delete a[b],delete c[b]}),this.symbols=null},namespace("PIXI.animate").FlashArt=b}(),function(){var a=include("springroll.Task"),b=include("PIXI.animate.FlashArt"),c=include("springroll.pixi.TextureAtlas"),d=include("PIXI.Texture"),e=function(b){a.call(this,b,b.src),this.src=this.filter(b.src),this.images=b.images,this.libName="lib",this.imagesName="images"},f=extend(e,a);e.test=function(a){return a.src&&a.src.search(/\.js$/i)>-1&&"pixi"==a.type&&"PIXI.animate.FlashArt"==a.format&&a.images&&Array.isArray(a.images)},f.start=function(a){for(var e,f,g=[],h=0,i=0;i<this.images.length;++i)if(this.images[i].atlas)f=this.images[i],e={atlas:this.filter(f.atlas),id:"asset_"+h++,type:"pixi"},f.image?e.image=this.filter(f.image):(e.alpha=this.filter(f.alpha),e.color=this.filter(f.color)),g.push(e);else if("PIXI.animate.SpriteSheet"==this.images[i].format)f=this.images[i].clone(),g.push(f),f.type||(f.type="pixi"),f.id||(f.id="asset_"+h++);else{if(f="string"==typeof this.images[i]?{image:this.filter(this.images[i])}:this.images[i].clone(),!f.id){var j=f.src||f.color,k=j.lastIndexOf(".");k>-1&&(j=j.substr(0,k));var l=j.lastIndexOf("/");l>-1&&(j=j.substr(l+1)),f.id=j}f.type="pixi",g.push(f)}var m={_flash:this.src};g.length&&(m._images={assets:g}),this.load(m,function(e){var f=new b(this.id,e._flash,this.libName),g=e._images;if(g){var h=[],i=[],j=namespace(this.imagesName);for(var k in g){var l=g[k];if(h.push(l),l instanceof d)j[k]=l,i.push(k);else if(l instanceof c){var m=l.frames;for(var n in m)j[n]=m[n],i.push(n)}}f._orig_destroy=f.destroy,f.destroy=function(){var a;for(a=h.length-1;a>=0;--a)h[a].destroy?h[a].destroy():h[a].dispatchEvent("destroy");for(a=i.length-1;a>=0;--a)delete j[i[a]];f._orig_destroy()}}a(f)}.bind(this))},namespace("PIXI.animate").FlashArtTask=e}(),function(a){var b=include("PIXI.animate.MovieClip"),c=include("springroll.AnimatorInstance"),d=include("springroll.GenericMovieClipInstance"),e=function(){d.call(this)};e.test=function(a){return a instanceof b},e.hasAnimation=d.hasAnimation,e.getDuration=d.getDuration;var f=(d.prototype,c.extend(e,d));f._Generic_beginAnim=f.beginAnim,f.beginAnim=function(a,b){this._Generic_beginAnim(a,b),this.clip._updateTimeline()},f._Generic_setPosition=f.setPosition,f.setPosition=function(a){this._Generic_setPosition(a),this.clip._updateTimeline()},namespace("PIXI.animate").MovieClipInstance=e}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){this.assetManager.register("PIXI.animate.FlashArtTask",60),this.assetManager.register("PIXI.animate.SpriteSheetTask",70),this.animator.register("PIXI.animate.MovieClipInstance",10)}}(),function(){var a=include("springroll.LoadTask"),b=include("PIXI.animate.SpriteSheet"),c=(include("springroll.pixi.TextureAtlas"),include("PIXI.Texture"),function(b){a.call(this,b,b.src)}),d=(a.prototype,extend(c,a));c.test=function(a){return a.src&&a.src.search(/\.json$/i)>-1&&"pixi"==a.type&&"PIXI.animate.SpriteSheet"==a.format},d.start=function(a){this.load(this.src,function(c){var d=[];c.images.forEach(function(a){"string"==typeof a&&(a={image:a,type:"pixi"}),d.push(a)});var e=this.id;this.load(d,function(d){c.images.forEach(function(a,b){c.images[b]=d[b].baseTexture});var f=new b(c);f.addToGlobal(e),a(f)})}.bind(this))},namespace("PIXI.animate").SpriteSheetTask=c}();}();